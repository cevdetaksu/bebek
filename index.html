<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bizim BebeÄŸimiz</title>

<!-- Firebase v8 (kolay ve stabil sÃ¼rÃ¼m) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

<style>
body{
margin:0;
background:linear-gradient(to bottom,#fceaff,#ffd6f6);
font-family:sans-serif;
text-align:center;
color:#444;
overflow:hidden;
}
#ui{
position:absolute;
bottom:0;
width:100%;
background:rgba(255,255,255,0.95);
padding:10px;
}
button{
padding:10px 15px;
margin:5px;
border:none;
border-radius:10px;
background:#ff87c2;
color:white;
font-size:16px;
}
.bar{
height:10px;
background:#ddd;
border-radius:10px;
margin:5px 0;
overflow:hidden;
}
.fill{
height:100%;
background:#ff87c2;
width:100%;
}
</style>
</head>
<body>

<div id="ui">
<div>AÃ§lÄ±k</div>
<div class="bar"><div id="hungerBar" class="fill"></div></div>

<div>Mutluluk</div>
<div class="bar"><div id="happyBar" class="fill"></div></div>

<button onclick="feed()">ğŸ Besle</button>
<button onclick="play()">ğŸ§¸ Oyna</button>
<button onclick="sleep()">ğŸ˜´ Uyut</button>
</div>

<script>

// âœ… SENÄ°N FIREBASE CONFIGÄ°N
var firebaseConfig = {
  apiKey: "AIzaSyCmLDHsE_HnPfULTkKo43caR8xfrhJo7A0",
  authDomain: "bebek-bf416.firebaseapp.com",
  projectId: "bebek-bf416",
  storageBucket: "bebek-bf416.firebasestorage.app",
  messagingSenderId: "636452743271",
  appId: "1:636452743271:web:23327585b91be6f714ccc2",
  measurementId: "G-62ZW30Z166"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();
var babyRef = db.collection("game").doc("babyData");

// VarsayÄ±lan deÄŸerler
var hunger = 100;
var happiness = 100;
var age = 0;

// Firebase dinleme
babyRef.onSnapshot(function(doc){
if(doc.exists){
var data = doc.data();
hunger = data.hunger;
happiness = data.happiness;
age = data.age;
updateBars();
}else{
save();
}
});

// 3D SAHNE
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
var renderer = new THREE.WebGLRenderer({alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

camera.position.z = 5;

// IÅŸÄ±k
var light = new THREE.PointLight(0xffffff,1);
light.position.set(5,5,5);
scene.add(light);

// Kafa
var headGeometry = new THREE.SphereGeometry(1.2,32,32);
var skinMaterial = new THREE.MeshStandardMaterial({color:0xffd6c9});
var head = new THREE.Mesh(headGeometry, skinMaterial);
scene.add(head);

// GÃ¶zler
var eyeGeo = new THREE.SphereGeometry(0.15,32,32);
var eyeMat = new THREE.MeshStandardMaterial({color:0x000000});
var eyeL = new THREE.Mesh(eyeGeo,eyeMat);
var eyeR = new THREE.Mesh(eyeGeo,eyeMat);
eyeL.position.set(-0.4,0.2,1);
eyeR.position.set(0.4,0.2,1);
head.add(eyeL);
head.add(eyeR);

// AÄŸÄ±z
var mouthGeo = new THREE.BoxGeometry(0.5,0.1,0.1);
var mouthMat = new THREE.MeshStandardMaterial({color:0xff4d6d});
var mouth = new THREE.Mesh(mouthGeo,mouthMat);
mouth.position.set(0,-0.4,1);
head.add(mouth);

// Animasyon
function animate(){
requestAnimationFrame(animate);
head.rotation.y += 0.005;
head.position.y = Math.sin(Date.now()*0.002)*0.1;
renderer.render(scene,camera);
}
animate();

// YÃ¼z ifadesi
function updateFace(){
if(hunger < 30){
mouth.scale.y = 2;
mouth.position.y = -0.6;
}
else if(happiness < 30){
mouth.scale.y = 0.2;
mouth.position.y = -0.5;
}
else{
mouth.scale.y = 1;
mouth.position.y = -0.4;
}
}

// Bar gÃ¼ncelle
function updateBars(){
document.getElementById("hungerBar").style.width = hunger+"%";
document.getElementById("happyBar").style.width = happiness+"%";
updateFace();
}

// Aksiyonlar
function feed(){
hunger = Math.min(100, hunger+20);
save();
}
function play(){
happiness = Math.min(100, happiness+20);
save();
}
function sleep(){
hunger = Math.max(0, hunger-5);
happiness = Math.min(100, happiness+5);
save();
}

// Firebase kaydet
function save(){
babyRef.set({
hunger:hunger,
happiness:happiness,
age:age
});
updateBars();
}

// Zamanla azalma
setInterval(function(){
hunger = Math.max(0, hunger-2);
happiness = Math.max(0, happiness-1);
save();
},60000);

updateBars();

</script>
</body>
</html>
